[2019-04-22 10:58:24.428 Information]  
 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager 
 User profile is available. Using '"C:\Users\15889421601\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[2019-04-22 14:36:20.688 Information]  
 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager 
 User profile is available. Using '"C:\Users\15889421601\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[2019-04-22 14:37:34.601 Information]  
 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager 
 User profile is available. Using '"C:\Users\15889421601\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[2019-04-22 14:37:36.248 Information]  
 AdminSystem.Infrastructure.ApplicationDbContext 
 Migrating database associated with context "ApplicationDbContext"
[2019-04-22 14:37:37.391 Information]  
 Microsoft.EntityFrameworkCore.Infrastructure 
 Entity Framework Core "2.2.4-servicing-10062" initialized '"ApplicationDbContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "MigrationsAssembly=AdminSystem.Api "
[2019-04-22 14:37:39.196 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("83"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='AdminSystem' AND TABLE_NAME='__EFMigrationsHistory';"
[2019-04-22 14:37:39.945 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("64"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='AdminSystem' AND TABLE_NAME='__EFMigrationsHistory';"
[2019-04-22 14:37:40.164 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("63"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;"
[2019-04-22 14:37:40.222 Information]  
 Microsoft.EntityFrameworkCore.Migrations 
 Applying migration '"20190422063622_test1"'.
[2019-04-22 14:37:40.700 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("206"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `Address_City` longtext NULL;"
[2019-04-22 14:37:40.886 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("152"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `Address_Country` longtext NULL;"
[2019-04-22 14:37:41.082 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("162"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `Address_State` longtext NULL;"
[2019-04-22 14:37:41.238 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("137"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `Address_Street` longtext NULL;"
[2019-04-22 14:37:41.406 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("157"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `Address_ZipCode` longtext NULL;"
[2019-04-22 14:37:41.580 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("156"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `LastLoginTime` longtext NULL;"
[2019-04-22 14:37:41.780 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("181"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `LastUpdateTime` longtext NULL;"
[2019-04-22 14:37:41.960 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("167"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `LastUpdateUserId` int NOT NULL DEFAULT 0;"
[2019-04-22 14:37:42.128 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("152"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `Phone` longtext NULL;"
[2019-04-22 14:37:42.307 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("164"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE `ApplicationUsers` ADD `Pwd` longtext NULL;"
[2019-04-22 14:37:42.441 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("82"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20190422063622_test1', '2.2.4-servicing-10062');"
[2019-04-22 14:37:43.099 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("61"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM `ApplicationUsers` AS `a`)
    THEN TRUE ELSE FALSE
END"
[2019-04-22 14:37:43.174 Information]  
 AdminSystem.Infrastructure.ApplicationDbContext 
 Migrated database associated with context "ApplicationDbContext"
[2019-04-22 14:37:45.973 Information]  
 Microsoft.AspNetCore.Hosting.Internal.WebHost 
 Request starting HTTP/1.1 GET http://localhost:50384/api/values  
[2019-04-22 14:37:46.629 Information]  
 Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker 
 Route matched with "{action = \"Get\", controller = \"Values\"}". Executing action "UserIdentity.Controllers.ValuesController.Get (AdminSystem.Api)"
[2019-04-22 14:37:46.742 Information]  
 Microsoft.AspNetCore.Authorization.DefaultAuthorizationService 
 Authorization failed.
[2019-04-22 14:37:46.804 Information]  
 Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker 
 Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
[2019-04-22 14:37:46.891 Information]  
 Microsoft.AspNetCore.Mvc.ChallengeResult 
 Executing ChallengeResult with authentication schemes ([]).
[2019-04-22 14:37:47.156 Information]  
 Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler 
 AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
[2019-04-22 14:37:47.195 Information]  
 IdentityServer4.AccessTokenValidation.IdentityServerAuthenticationHandler 
 AuthenticationScheme: "Bearer" was challenged.
[2019-04-22 14:37:47.270 Information]  
 Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker 
 Executed action "UserIdentity.Controllers.ValuesController.Get (AdminSystem.Api)" in 569.1968ms
[2019-04-22 14:37:47.420 Information]  
 Microsoft.AspNetCore.Hosting.Internal.WebHost 
 Request finished in 1456.1979ms 401 
[2019-04-22 17:54:59.692 Information]  
 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager 
 User profile is available. Using '"C:\Users\15889421601\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[2019-04-22 17:55:25.512 Information]  
 Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager 
 User profile is available. Using '"C:\Users\15889421601\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
[2019-04-22 17:55:26.356 Information]  
 AdminSystem.Infrastructure.ApplicationDbContext 
 Migrating database associated with context "ApplicationDbContext"
[2019-04-22 17:55:27.254 Information]  
 Microsoft.EntityFrameworkCore.Infrastructure 
 Entity Framework Core "2.2.4-servicing-10062" initialized '"ApplicationDbContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "MigrationsAssembly=AdminSystem.Api "
[2019-04-22 17:55:29.624 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("109"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE DATABASE `AdminSystem`;"
[2019-04-22 17:55:31.312 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("221"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(95) NOT NULL,
    `ProductVersion` varchar(32) NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
);"
[2019-04-22 17:55:32.092 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("81"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='AdminSystem' AND TABLE_NAME='__EFMigrationsHistory';"
[2019-04-22 17:55:32.296 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("64"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;"
[2019-04-22 17:55:32.336 Information]  
 Microsoft.EntityFrameworkCore.Migrations 
 Applying migration '"20190422095501_InitApplicationContext"'.
[2019-04-22 17:55:32.768 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("171"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE `ApplicationUsers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext NULL,
    `UserName` varchar(255) NULL,
    `Pwd` longtext NULL,
    `Sex` longtext NULL,
    `Phone` varchar(255) NULL,
    `Address_Street` longtext NULL,
    `Address_City` longtext NULL,
    `Address_Province` longtext NULL,
    `Address_Country` longtext NULL,
    `Address_FullAddress` longtext NULL,
    `CreateUserId` int NOT NULL,
    `CreateDateTime` datetime(6) NOT NULL,
    `UpdateUserId` int NOT NULL,
    `UpdateDateTime` datetime(6) NOT NULL,
    `DeleteUserId` int NOT NULL,
    `DeleteDateTime` datetime(6) NOT NULL,
    `IsDelete` bit NOT NULL,
    CONSTRAINT `PK_ApplicationUsers` PRIMARY KEY (`Id`)
);"
[2019-04-22 17:55:32.944 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("146"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE `Roles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleName` longtext NULL,
    `RoleDescr` longtext NULL,
    `CreateUserId` int NOT NULL,
    `CreateDateTime` datetime(6) NOT NULL,
    `UpdateUserId` int NOT NULL,
    `UpdateDateTime` datetime(6) NOT NULL,
    `DeleteUserId` int NOT NULL,
    `DeleteDateTime` datetime(6) NOT NULL,
    `IsDelete` bit NOT NULL,
    CONSTRAINT `PK_Roles` PRIMARY KEY (`Id`)
);"
[2019-04-22 17:55:33.167 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("198"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE `UserRole` (
    `UserId` int NOT NULL,
    `RoleId` int NOT NULL,
    `Id` int NOT NULL,
    CONSTRAINT `PK_UserRole` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_UserRole_Roles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `Roles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_UserRole_ApplicationUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `ApplicationUsers` (`Id`) ON DELETE CASCADE
);"
[2019-04-22 17:55:33.359 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("170"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE UNIQUE INDEX `IX_ApplicationUsers_Phone` ON `ApplicationUsers` (`Phone`);"
[2019-04-22 17:55:33.520 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("151"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE UNIQUE INDEX `IX_ApplicationUsers_UserName` ON `ApplicationUsers` (`UserName`);"
[2019-04-22 17:55:33.738 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("189"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX `IX_UserRole_RoleId` ON `UserRole` (`RoleId`);"
[2019-04-22 17:55:33.844 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("92"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20190422095501_InitApplicationContext', '2.2.4-servicing-10062');"
[2019-04-22 17:55:34.392 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("61"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM `ApplicationUsers` AS `a`)
    THEN TRUE ELSE FALSE
END"
[2019-04-22 17:55:35.053 Information]  
 Microsoft.EntityFrameworkCore.Database.Command 
 Executed DbCommand ("80"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 255), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `ApplicationUsers` (`CreateDateTime`, `CreateUserId`, `DeleteDateTime`, `DeleteUserId`, `IsDelete`, `Name`, `Phone`, `Pwd`, `Sex`, `UpdateDateTime`, `UpdateUserId`, `UserName`, `Address_City`, `Address_Country`, `Address_FullAddress`, `Address_Province`, `Address_Street`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `ApplicationUsers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
[2019-04-22 17:55:35.206 Information]  
 AdminSystem.Infrastructure.ApplicationDbContext 
 Migrated database associated with context "ApplicationDbContext"
